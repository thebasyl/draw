const canvas=document.createElement("canvas");canvas.width=window.innerWidth,canvas.height=window.innerHeight,document.body.append(canvas),window.onresize=()=>{canvas.width=window.innerWidth,canvas.height=window.innerHeight};const context=canvas.getContext("2d");context.fillStyle="#000",context.fillRect(0,0,canvas.width,canvas.height),context.strokeStyle="#eee",context.lineWidth=2;let mousedown=!1,c=[],d=[],i=-1,r1=[],r2=[],colours={w:"#eee",g:"#8f7",b:"#7bf",r:"#f88",y:"#fff382",p:"#fb82ff",e:"#000"},history=[context.getImageData(0,0,canvas.width,canvas.height)];function draw(){context.beginPath(),context.moveTo(c[0],c[1]),context.lineTo(d[0],d[1]),context.stroke()}function save(){history.push(context.getImageData(0,0,canvas.width,canvas.height)),i++}function undo(){i>-1&&(context.clearRect(0,0,canvas.width,canvas.height),context.putImageData(history[i],0,0),history.splice(i,1),i--)}function width(t){t!=NaN&&(context.lineWidth=parseInt(t))}function remove(){console.log(r1[0],r1[1],r2[0],r2[1]),context.clearRect(r1[0],r1[1],r2[0],r2[1]),history.push(context.getImageData(0,0,canvas.width,canvas.height)),i++}function short(t){"z"===t?undo():"d"===t?remove():void 0!=colours[t]&&(context.strokeStyle=colours[t])}canvas.addEventListener("mousedown",t=>{c[0]=r1[0]=t.clientX,c[1]=r1[1]=t.clientY,mousedown=1}),canvas.addEventListener("mouseup",t=>{mousedown=0,save(),r2[0]=t.clientX,r2[1]=t.clientY}),canvas.addEventListener("mousemove",t=>{mousedown&&(d[0]=t.clientX,d[1]=t.clientY,draw(),c[0]=t.clientX,c[1]=t.clientY)}),document.addEventListener("keydown",t=>{short(t.key),width(t.key)});
